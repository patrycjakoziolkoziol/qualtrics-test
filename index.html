<!DOCTYPE html>
<html>
  <head>
    <title>Qualtrics Test</title>

    <!-- ✅ Inject styles into Qualtrics modal AFTER it's loaded -->
    <script>
      window.addEventListener('load', function () {
        const checkInterval = setInterval(() => {
          const modal = document.querySelector('.QSIFeedbackButton-target-container');
          if (modal) {
            // Style the modal
            modal.style.width = '301px';
            modal.style.maxWidth = '301px';
            modal.style.height = '478px';
            modal.style.right = '20px';
            modal.style.left = 'auto';
            modal.style.bottom = '100px';
            modal.style.borderRadius = '8px';
            modal.style.boxShadow = '0 0 20px rgba(0, 0, 0, 0.1)';
            modal.style.overflow = 'hidden';
            modal.style.padding = '0';
            modal.style.margin = '0';
            modal.style.boxSizing = 'border-box';
            modal.style.position = 'fixed';
            modal.style.backgroundColor = '#ffffff';
            modal.style.zIndex = '9999';

            // Style the iframe inside
            const iframe = modal.querySelector('iframe');
            if (iframe) {
              iframe.style.width = '100%';
              iframe.style.height = '100%';
              iframe.style.border = 'none';
              iframe.style.display = 'block';
            }

            clearInterval(checkInterval);
          }
        }, 100); // check every 100ms
      });
    </script>

    <!-- ✅ Qualtrics Intercept Snippet -->
    <script type="text/javascript">
      (function(){
        var g=function(e,h,f,g){
          this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){
            for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);
            if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
          this.set=function(a,c){
            var b="",b=new Date;
            b.setTime(b.getTime()+6048E5);
            b="; expires="+b.toGMTString();
            document.cookie=a+"="+c+b+"; path=/; "
          };
          this.check=function(){
            var a=this.get(f);
            if(a)a=a.split(":");
            else if(100!=e)
              "v"==h&&(e=Math.random()>=e/100?0:100),
              a=[h,e,0],
              this.set(f,a.join(":"));
            else return!0;
            var c=a[1];
            if(100==c)return!0;
            switch(a[0]){
              case "v":return!1;
              case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c
            }
            return!0
          };
          this.go=function(){
            if(this.check()){
              var a=document.createElement("script");
              a.type="text/javascript";
              a.src=g;
              document.body&&document.body.appendChild(a)
            }
          };
          this.start=function(){
            var t=this;
            "complete"!==document.readyState?
              window.addEventListener?
              window.addEventListener("load",function(){t.go()},!1):
              window.attachEvent&&window.attachEvent("onload",function(){t.go()}):
              t.go()
          };
        };
        try{
          (new g(100,"r","QSI_S_ZN_shSk0NQEbBNTOyl",
          "https://znshsk0nqebbntoyl-moto.siteintercept.qualtrics.com/SIE/?Q_ZID=ZN_shSk0NQEbBNTOyl")).start()
        }catch(i){}
      })();
    </script>
    <!-- ✅ End Qualtrics Snippet -->

  </head>
  <body>
    <h1>✅ Qualtrics Intercept Test</h1>
    <p>Now add <code>?testuser=1</code> to the URL.</p>
  </body>
</html>
